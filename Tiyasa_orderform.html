<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order Form Annapurna Seeds</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body { font-family: Arial,sans-serif; margin: 12px; }
        .form-row { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 12px;}
        .form-col { flex: 1 1 250px; min-width: 220px; }
        input, select, textarea, button {
            width: 100%; padding: 10px; margin-top: 4px; margin-bottom: 8px; font-size: 1rem; box-sizing: border-box;
        }
        label { font-weight: 500; }
        button { background-color: #2d7abd; color: #fff; border:none; font-size:1.1rem; padding:10px 0; border-radius:6px; cursor:pointer;}
        h1, h2 { margin: 0.5em 0 0.2em 0; }
        center { display: block; }
        table, th, td { border:1px solid #000; border-collapse:collapse; }
        th, td { padding: 6px; text-align: left; }
        th { background-color: #f0f0f0; }
        @media (max-width: 600px) {
            body { font-size: 1em; }
            .form-row { flex-direction: column; gap: 0;}
            .form-col { min-width: unset; }
            input, select, textarea, button { font-size: 1.1em; }
            h1, h2 { font-size: 1.4em; }
        }
    </style>
    <!-- Load jsPDF and autoTable from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <center><h1>Annapurna Seeds</h1></center>
    <center><h2>ORDER FORM</h2></center>
    <br/>

    <div class="form-row">
        <div class="form-col">
            <label><b>Company Name :</b></label> <div>TIYASHA AGRO PRODUCT PVT LTD</div>
            <label><b>Address:</b></label> <div>Amodpur, MEDINIPUR, West Begal 721146</div>
            <label><b>GST No:</b></label> <div>19AAJCT6448D1Z1</div>
            <label><b>State:</b></label> <div>West Bengal</div>
        </div>
        <div class="form-col">
            <label for="date"><b>Date:</b></label>
            <input type="date" id="date">
        </div>
        <div class="form-col">
            <label for="orderNo"><b>TWB Order No:</b></label>
            <input type="text" id="orderNo" placeholder="Enter order No (Prefix with TWB)">
        </div>
    </div>

    <span id="dropSelectorBlock">
        <b><label for="templateCount"><b>Select Number of loadings (1-3):</b></label></b>
        <select id="templateCount">
            <option value="">-- Select --</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </span>
    <div id="dropsContainer" style="min-height:40px;"></div>

    <br />
    <label for="Note"><b>Note:</b></label>
    <input type="text" id="Note" placeholder="Enter Note">
    <br />
    <label for="signature"><b>Signature:</b></label>
    <input type="text" id="signature" placeholder="Enter Signature">

    <br /><button id="downloadBtn" onclick="downloadPDF()">Download as PDF</button>

<script>
// Code Generated by Sidekick is for learning and experimentation purposes only.

document.getElementById("templateCount").addEventListener("change", generateTemplates);

function generateRows(dropIndex) {
    let table = `<table style="width:100%;border-collapse:collapse;margin-top:12px;">
        <tr>
            <th style="border:1px solid #000;padding:6px;background:#f0f0f0;">S. No</th>
            <th style="border:1px solid #000;padding:6px;background:#f0f0f0;">Variety</th>
            <th style="border:1px solid #000;padding:6px;background:#f0f0f0;">Packing Size</th>
            <th style="border:1px solid #000;padding:6px;background:#f0f0f0;">Required Quantity</th>
        </tr>
    `;
    for (let i = 1; i <= 7; i++) {
        table += `<tr>
            <td style="border:1px solid #000;padding:6px;">${i}</td>
            <td style="border:1px solid #000;padding:6px;"><input type="text" name="variety_${dropIndex}_${i}" placeholder="Variety"></td>
            <td style="border:1px solid #000;padding:6px;"><input type="text" name="pack_${dropIndex}_${i}" placeholder="Packing Size"></td>
            <td style="border:1px solid #000;padding:6px;"><input type="text" name="qty_${dropIndex}_${i}" placeholder="Required Quantity"></td>
        </tr>`;
    }
    table += `</table>`;
    return table;
}

function generateTemplates() {
    const count = parseInt(document.getElementById("templateCount").value);
    const container = document.getElementById("dropsContainer");
    container.innerHTML = "";
    if (!count || count < 1 || count > 3) {
        container.innerHTML = "<span style='color:red;'>Please select how many loadings.</span>";
        return;
    }
    for (let i = 1; i <= count; i++) {
        container.innerHTML += `
            <div class="drop-block">
                <h2>Loading ${i}</h2>
                <div class="form-col">
                    <label for="Party_Name_${i}">Party Name:</label>
                    <input type="text" id="Party_Name_${i}" placeholder="Enter Party Name">
                </div>
                <div class="form-col">
                    <label for="delivery_${i}">Delivery Address:</label>
                    <input type="text" id="delivery_${i}" placeholder="Enter Delivery Address">
                </div>
                <div class="form-col">
                    <label for="phone_${i}">Consignee Phone Number:</label>
                    <input type="text" id="phone_${i}" placeholder="Enter Phone Number">
                </div>
		  <div class="form-col">
                    <label for="gstNum_${i}">GST Number:</label>
                    <input type="text" id="gstNum_${i}" placeholder="Enter GST Number">
                </div>
		  <div class="form-col">
                    <label for="seedLicence_${i}">Seed Licence Number:</label>
                    <input type="text" id="seedLicence_${i}" placeholder="Enter Seed Licence Number">
                </div>
                <br />
                ${generateRows(i)}
                <div class="form-col">
                    <br /><label for="otherreq_${i}">Any Other Requirements/ Note:</label>
                    <input type="text" id="otherreq_${i}" placeholder="Enter Any Other Requirements/ Note">
                </div>
            </div>
            <br>
        `;
    }
}

function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let y = 10; // vertical cursor

    doc.setFontSize(16);
    doc.text("Annapurna Seeds", 105, y, { align: "center" });
    y += 8;
    doc.setFontSize(13);
    doc.text("ORDER FORM", 105, y, { align: "center" });
    y += 10;
    doc.setFontSize(10);

    // Company Info
    doc.text("Company Name: TIYASHA AGRO PRODUCT PVT LTD", 12, y);
    doc.text("Address: Amodpur, MEDINIPUR, West Begal 721146", 105, y);
    y += 6;
    doc.text("GST No: 19AAJCT6448D1Z1", 12, y);
    doc.text("State: West Bengal", 105, y);
    y += 6;
    // Date, OrderNo
    doc.text("Date: " + (document.getElementById("date").value || ""), 12, y);
    doc.text("TWB Order No: " + (document.getElementById("orderNo").value || ""), 105, y);
    y += 10;

    const count = parseInt(document.getElementById("templateCount").value);
    if (!count || count < 1 || count > 3) {
        doc.text("Please select how many loadings (1-3) before downloading.", 10, y);
        doc.save('OrderForm.pdf');
        return;
    }

    for (let i = 1; i <= count; i++) {
        doc.setFontSize(12);
        doc.text(`Loading ${i}`, 12, y);
        y += 7;
        doc.setFontSize(10);

        doc.text("Party Name: " + (document.getElementById("Party_Name_" + i)?.value || ""), 12, y);
        doc.text("Delivery Address: " + (document.getElementById("delivery_" + i)?.value || ""), 105, y);
        y += 6;
        doc.text("Consignee Phone Number: " + (document.getElementById("phone_" + i)?.value || ""), 12, y);
        y += 6;
	
doc.text("GST Number: " + (document.getElementById("gstNum_" + i)?.value || ""), 12, y);
        y += 6;

doc.text("Seed Licence Number: " + (document.getElementById("seedLicence_" + i)?.value || ""), 12, y);
        y += 6;


        // Prepare table data
        let tableData = [];
        for (let j = 1; j <= 7; j++) {
            tableData.push([
                j,
                document.getElementsByName(`variety_${i}_${j}`)[0]?.value || "",
                document.getElementsByName(`pack_${i}_${j}`)[0]?.value || "",
                document.getElementsByName(`qty_${i}_${j}`)[0]?.value || "",
            ]);
        }
        doc.autoTable({
            head: [["S. No", "Variety", "Packing Size", "Required Quantity"]],
            body: tableData,
            startY: y,
            theme: "grid",
            styles: { fontSize: 9 },
            margin: { left: 12, right: 12 },
            headStyles: { fillColor: [240,240,240] },
        });
        y = doc.lastAutoTable.finalY + 8; // update y for next section

        doc.text("Any Other Requirements/Note: " + (document.getElementById("otherreq_" + i)?.value || ""), 12, y);
        y += 10;
    }
    // Note & Signature
    doc.text("Note: " + (document.getElementById("Note").value || ""), 12, y);
    doc.text("Signature: " + (document.getElementById("signature").value || ""), 105, y);

    doc.save('OrderForm.pdf');
}
</script>

</body>
</html>
